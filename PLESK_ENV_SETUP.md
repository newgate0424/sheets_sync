# üö® ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ APP_URL ‡∏ö‡∏ô Plesk (‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Cron "fetch failed")

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
‡∏´‡∏≤‡∏Å Cron Jobs ‡πÅ‡∏™‡∏î‡∏á error "Failed to run job: fetch failed" ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤:
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ production URL ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£
- Cron ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API endpoint ‡πÑ‡∏î‡πâ

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏ß‡∏¥‡∏ò‡∏µ)

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô Plesk UI (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

1. **‡πÄ‡∏Ç‡πâ‡∏≤ Plesk Panel** ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å domain ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
2. **Node.js** ‚Üí ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà application ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. **Environment Variables** (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°)
4. **Add variable**:
   ```
   Key: APP_URL
   Value: https://your-actual-domain.com
   ```
   ‚ö†Ô∏è **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `your-actual-domain.com` ‡πÄ‡∏õ‡πá‡∏ô domain ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì**
   
5. **Save** ‡πÅ‡∏•‡∏∞ **Restart Application**

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå .env ‡∏ö‡∏ô server

1. **File Manager** ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå project
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î:
   ```env
   APP_URL="https://your-actual-domain.com"
   ```
4. **Restart Application** ‡∏ú‡πà‡∏≤‡∏ô Plesk ‚Üí Node.js

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Plesk Additional directives

1. **Apache & nginx Settings**
2. **Additional directives for HTTP**
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°:
   ```nginx
   fastcgi_param APP_URL "https://your-actual-domain.com";
   ```

## ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

1. Restart application
2. ‡πÄ‡∏Ç‡πâ‡∏≤ `/cron` page
3. ‡∏Å‡∏î "Run Now" ‡∏ó‡∏µ‡πà cron job ‡πÉ‡∏î‡πÜ
4. ‡∏î‡∏π logs - ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ "fetch failed" ‡∏≠‡∏µ‡∏Å

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á URL ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

‚úÖ **‡∏ñ‡∏π‡∏Å:**
- `https://sheets.yourdomain.com`
- `https://api.yourcompany.co.th`
- `https://subdomain.example.com`

‚ùå **‡∏ú‡∏¥‡∏î:**
- `http://localhost:3000` (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö local ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- `your-domain.com` (‡∏Ç‡∏≤‡∏î https://)
- `https://yourdomain.com/` (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ trailing slash)

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Logs

‡∏´‡∏≤‡∏Å logs ‡πÅ‡∏™‡∏î‡∏á:
```
[Cron] Calling API: https://your-domain.com/api/sync-table
```
‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‚úÖ

‡∏´‡∏≤‡∏Å logs ‡πÅ‡∏™‡∏î‡∏á:
```
[Cron] Calling API: http://localhost:3000/api/sync-table
```
‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á APP_URL ‚ùå

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- **‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ HTTPS** ‡∏ö‡∏ô production (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà HTTP)
- ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Cloudflare ‡∏´‡∏£‡∏∑‡∏≠ proxy ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ URL ‡∏´‡∏•‡∏±‡∏á proxy
- ‡∏ï‡∏±‡πâ‡∏á APP_URL ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö domain ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á production ‡∏à‡∏£‡∏¥‡∏á‡πÜ
